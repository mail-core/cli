@mail-core/cli ‚å®Ô∏è
----------------
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è cli-—Å–∫—Ä–∏–ø—Ç–æ–≤:

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π: `npx mail-core-cli init` üî•
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω—Å–æ–ª—å—é –∏–∑ –∫–æ–º–∞–Ω–¥—ã (—Ü–≤–µ—Ç–∞, —Å–ø–∏–Ω–Ω–µ—Ä –∏ —Ç.–ø.)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ [Inquirer](https://github.com/SBoudrias/Inquirer.js#readme)
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å `package.json` (—á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å)
- –•–µ–ª–ø–µ—Ä—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è shell-–∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—É—Å–∫–∞ `npm`/`npx`
- –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º [yargs](https://github.com/yargs/yargs#readme)
- typescript-first (—Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è)


```sh
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç
npx @mail-core/cli init

# –°–æ–∑–¥–∞—ë–º —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É üëçüèª
npx mail-core-cli create

# –î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏
npx mail-core-cli --help
```

---

### API

```ts
import { createCommand } from '@mail-core/cli';

// –û–ø–∏—Å—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É
export const install = createCommand({
	name: 'install',
	describe: 'Install config',
	
	options: {
		autoMerge: {
			type: 'boolean',
			description: 'Use auto merge',
		},
	},

	async handler(argv, env) {
		// argv ‚Äî —Ä–∞—Å–ø–∞—Ä—à–µ–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
		//
		// env ‚Äî ¬´–æ–∫—Ä—É–∂–µ–Ω–∏–µ¬ª:
		//  - name ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
		//  - describe ‚Äî –µ—ë –æ–ø–∏—Å–∞–Ω–∏–µ
		//  - options ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ü–∏–π, –∫—Ä–æ–º–µ —ç—Ç–æ–≥–æ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `argv`
		//  - console ‚Äî –∫–æ–Ω—Å–æ–ª—å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
		//    - console.cli ‚Äî –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —é–∑–µ—Ä–æ–º
		//    - console.spinner ‚Äî —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏–Ω–Ω–µ—Ä–æ–º (—á–µ—Ä–µ–∑ Ora)
		//    - console.nl ‚Äî –≤—ã–≤–æ–¥ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏
		//    - console.hr ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
		//    - console.raw ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ Native Console
		//    - {log, error, warn, ...rest}
		//  - style ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (—á–µ—Ä–µ–∑ Chalk)
	},
});
```

### API

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

- **ROOT_DIR**: `string` ‚Äî –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞
- **IS_NPX_ENV**: `boolean` - –∑–∞–ø—É—â–µ–Ω–∞ –ª–∏ –∫–æ–º–∞–Ω–¥–∞ —á–µ—Ä–µ–∑ `npx`?


---

#### –†–∞–±–æ—Ç–∞ —Å package.json

- **readPackageJson** ‚Äî –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø—É—Ç—å, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å `package.json`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ –±—É–¥–µ—Ç `ROOT_DIR`
- **updatePackageJson** ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å package.json, –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø—É—Ç—å, –≤—Ç–æ—Ä—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `PackageJson`
- **registerRunCommand** ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –≤ [`npm.scripts`](https://docs.npmjs.com/cli/v7/commands/npm-run-script)
- **runCommandByScriptHook** ‚Äî –ø–æ —Ñ–∞–∫—Ç—É —Ç–æ—Ç –∂–µ `registerRunCommand`, –Ω–æ –¥–ª—è `npm` —Ö—É–∫–æ–≤
- **hasPackageJsonDependency** / **hasPackageJsonDevDependency** / **hasPackageJsonPeerDependency** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **removePackageJsonDependency** ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏–∑ `PackageJson`
- **getPackageInstallType** ‚Äî –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å:
  - `true` ‚Äî –ø–∞–∫–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–≤ `dependencies`)
  - `dev` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `devDependencies`
  - `self` ‚Äî –º–µ—Ç–æ–¥ –±—ã–ª –≤—ã–∑–≤–∞–Ω –≤ —Å–∞–º–æ–º —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–º –ø–∞–∫–µ—Ç–µ
  - `false` ‚Äî –Ω–∏—á–µ–≥–æ –∏–∑ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ


---

### Shell / Exec

- **spawn** ‚Äî –æ–±–≤—è–∑–∫–∞ –Ω–∞–¥ –Ω–∞—Ç–∏–≤–Ω—ã–º `spawn`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise, —É–º–µ–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏–Ω–Ω–µ—Ä –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã (–Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ –∫–æ–Ω–µ—á–Ω–æ, –Ω–æ —É–¥–æ–±–Ω–æ)

---

### npm / npx

- **npxRun** ‚Äî –∑–∞–ø—É—Å–∫ `npx` –∫–æ–º–∞–Ω–¥—ã, –æ–ø—è—Ç—å –∂–µ —Å–ø–∏–Ω–Ω–µ—Ä, Promise –∏ —Ç.–ø.
- **npmRun** ‚Äî –∑–∞–ø—É—Å–∫ `npm scripts`
- **npmInstall** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–º–æ—Å—Ç–µ–π
- **npmInstallPackage** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
